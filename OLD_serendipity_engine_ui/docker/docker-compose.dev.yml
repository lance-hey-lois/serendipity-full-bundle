version: '3.8'\n\n# Development override for docker-compose\nservices:\n  quantum-backend:\n    build:\n      context: ..\n      dockerfile: docker/Dockerfile.backend\n    environment:\n      - DEBUG=true\n      - PORT=8000\n      - HOST=0.0.0.0\n      - WORKERS=1  # Single worker for development\n      - QUANTUM_FALLBACK=true\n      - QUANTUM_MAX_RETRIES=2\n      - REQUIRE_AUTH=false\n    volumes:\n      - ../backend:/app/backend:rw  # Live reload\n      - ../engine:/app/engine:rw\n      - ../config:/app/config:rw\n    command: |\n      sh -c \"\n        pip install watchdog &&\n        python -m uvicorn backend.main:app --host 0.0.0.0 --port 8000 --reload\n      \"\n    \n  quantum-frontend:\n    build:\n      context: ..\n      dockerfile: docker/Dockerfile.frontend\n      target: base  # Use base image for development\n    volumes:\n      - ../frontend:/app:rw\n      - /app/node_modules  # Anonymous volume for node_modules\n    environment:\n      - NODE_ENV=development\n      - NEXT_PUBLIC_QUANTUM_API_URL=http://localhost:8000\n    command: |\n      sh -c \"\n        npm install &&\n        npm run dev\n      \"\n    ports:\n      - \"3000:3000\"\n      - \"3001:3001\"  # Next.js dev server\n\n  # Development database (SQLite)\n  quantum-db:\n    image: alpine:latest\n    container_name: quantum-dev-db\n    volumes:\n      - dev_db_data:/data\n    command: tail -f /dev/null  # Keep container running\n    networks:\n      - quantum-network\n    profiles:\n      - dev\n\nvolumes:\n  dev_db_data:\n    driver: local\n"